<!-- The SignUp Modal -->
<section>
  <div class="modal-header">
    <button type="button" class="btn btn-xs btn-default pull-right" data-dismiss="modal" aria-label="Close" ng-click="close()"><i class="fa fa-fw fa-times"></i></button>
    <h4 class="modal-title"><i class="fa fa-fw fa-user-plus"></i> Request a New Account</h4>
  </div>
  
  <!-- Registration Form -->
  <div class="modal-body">
    <form name="registerForm" ng-submit="ok(newProject)">
      
      <div class="row">
        <div class="col-sm-12">
          <!-- Enter Full Name -->
          <div class="form-group" ng-class="{ 
              'has-error has-feedback': !registerForm.fullName.$pristine && registerForm.fullName.$invalid, 
              'has-success has-feedback': !registerForm.fullName.$pristine && registerForm.fullName.$valid }">
            <label for="fullName">Full Name</label>
            <input type="text" class="form-control" name="fullName" id="fullName" 
                ng-model="newProject.name" placeholder="Full Name" required>
            <span class="form-control-feedback glyphicon" ng-if="!registerForm.fullName.$pristine"
                ng-class="{ 'glyphicon-remove': registerForm.fullName.$invalid, 'glyphicon-ok': registerForm.fullName.$valid }"></span>
                
            <div class="alert-danger" ng-if="!registerForm.fullName.$pristine" ng-messages="registerForm.fullName.$error">
              <div ng-message="required">You must choose a name for this project.</div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="row">
        <div class="col-sm-12">
          <!-- Enter E-mail -->
          <div class="form-group" ng-class="{ 
              'has-error has-feedback': !registerForm.email.$pristine && registerForm.email.$invalid, 
              'has-success has-feedback': !registerForm.email.$pristine && registerForm.email.$valid }">
            <label for="email">E-mail Address</label>
            <input type="email" class="form-control" name="email" id="email" 
                ng-model="newProject.email" placeholder="E-mail Address" required>
            <span class="form-control-feedback glyphicon" ng-if="!registerForm.email.$pristine"
                ng-class="{ 'glyphicon-remove': registerForm.email.$invalid, 'glyphicon-ok': registerForm.email.$valid }"></span>
                
            <div class="alert-danger" ng-if="!registerForm.email.$pristine" ng-messages="registerForm.email.$error">
              <div ng-message="required,email">You must enter a valid e-mail address.</div>
            </div>
            <small><i class="fa fa-warning fa-fw text-warning"></i> You will be asked to verify this e-mail address.</small>
          </div>
        </div>
      </div>
      
      <div class="row">
        <div class="col-sm-12">
          <!-- Choose a username (namespace) -->
          <div class="form-group" ng-class="{ 
              'has-error has-feedback': !registerForm.namespace.$pristine && registerForm.namespace.$invalid, 
              'has-success has-feedback': !registerForm.namespace.$pristine && registerForm.namespace.$valid }">
            <label for="namespace">Username</label>
            <input type="text" class="form-control" name="namespace" id="namespace"
                ng-model="newProject.namespace" placeholder="Username" required minlength="3" maxlength="20" pattern="[a-zA-Z0-9]+">
            <span class="form-control-feedback glyphicon" ng-if="!registerForm.namespace.$pristine"
                ng-class="{ 'glyphicon-remove': registerForm.namespace.$invalid, 'glyphicon-ok': registerForm.namespace.$valid }"></span>
                
            
            <div class="alert-danger" ng-if="!registerForm.namespace.$pristine" ng-messages="registerForm.namespace.$error">
              <div ng-message="required">You must enter a username.</div>
              <div ng-message="pattern">Username may only contain alpha-numeric characters.</div>
              <div ng-message="minlength,maxlength">Username must be between 3 and 20 characters.</div>
              
              <!-- FIXME: Check username availability?
              <div class="alert-danger" ng-if="namespaceExists">Username already in use.</div>
              <div class="alert-info" ng-if="namespaceExists === null">Checking availability...</div>
              <div class="alert-success" ng-if="!namespaceExists">Username is available.</div>
              -->
            </div>
          </div>
        </div>
      </div>
        
      <!-- <sup><i class="fa fa-fw fa-question-circle"></i></sup> -->
      <div class="row">
        <div class="col-sm-6">
          <!-- Choose a password -->
          <div class="form-group" ng-class="{ 
              'has-error has-feedback': !registerForm.password.$pristine && registerForm.password.$invalid, 
              'has-success has-feedback': !registerForm.password.$pristine && registerForm.password.$valid }">
            <label for="password">Password</label>
            <input type="password" class="form-control" name="password" id="password"
                ng-model="newProject.password" placeholder="Password" required minlength="6">
            <span class="form-control-feedback glyphicon" ng-if="!registerForm.password.$pristine"
                ng-class="{ 'glyphicon-remove': registerForm.password.$invalid, 'glyphicon-ok': registerForm.password.$valid }"></span>
                    
            <div class="alert-danger" ng-if="!registerForm.password.$pristine" ng-messages="registerForm.password.$error">
              <div ng-message="required">You must enter a password.</div>
              <div ng-message="pattern">Password may not contain spaces.</div>
              <div ng-message="minlength,maxlength">Password must be at least 6 characters.</div>
            </div>
          </div>
        </div>
        <div class="col-sm-6">
          <!-- Confirm password -->
          <div class="form-group" ng-class="{ 
              'has-error has-feedback': !registerForm.passwordConf.$pristine && registerForm.passwordConf.$invalid, 
              'has-success has-feedback': !registerForm.passwordConf.$pristine && registerForm.passwordConf.$valid }">
            <label for="passwordConf">Confirm Password</label>
            <input type="password" class="form-control" name="passwordConf" id="passwordConf"
                ng-model="newProject.passwordConfirmation" placeholder="Confirm Password" required minlength="6" pattern="{{ newProject.password }}">
            <span class="form-control-feedback glyphicon" ng-if="!registerForm.passwordConf.$pristine"
                ng-class="{ 'glyphicon-remove': registerForm.passwordConf.$invalid, 'glyphicon-ok': registerForm.passwordConf.$valid }"></span>
                
                
            <div class="alert-danger" ng-if="!registerForm.passwordConf.$pristine" ng-messages="registerForm.passwordConf.$error">
              <div ng-message="required">You must enter a password.</div>
              <div ng-message="pattern">Passwords do not match.</div>
              <div ng-message="minlength,maxlength">Password must be at least 6 characters.</div>
            </div>
          </div>
        </div>
      </div>
      
      <hr />
      
      <!-- Enter Organization -->
      <div class="form-group" ng-class="{ 
          'has-error has-feedback': !registerForm.organization.$pristine && registerForm.organization.$invalid, 
          'has-success has-feedback': !registerForm.organization.$pristine && registerForm.organization.$valid }">
        <label for="organization">Organization</label>
        <input type="text" class="form-control" name="organization" id="organization" 
            ng-model="newProject.organization" placeholder="Organization" required>
        <span class="form-control-feedback glyphicon" ng-if="!registerForm.organization.$pristine"
            ng-class="{ 'glyphicon-remove': registerForm.organization.$invalid, 'glyphicon-ok': registerForm.organization.$valid }"></span>
            
        <div class="alert-danger" ng-if="!registerForm.organization.$pristine" ng-messages="registerForm.organization.$error">
          <div ng-message="required">Enter the name of your organization.</div>
        </div>
      </div>
      
      <!-- Enter Description -->
      <textarea class="form-control" rows="4" name="description" id="description"
          ng-model="newProject.description" placeholder="Describe you plan to use NDS Labs..."></textarea>
          
        <div class="alert-danger" ng-if="!registerForm.description.$pristine" ng-messages="registerForm.description.$error">
          <div ng-message="required">Describe your reason(s) for using NDS Labs.</div>
        </div>
    </form>
  </div>
  
  <!-- Progress / Error Message -->
  <div class="row">
    <div class="text-center col-xs-12">
      <p class="text-danger" ng-if="errorMessage">
        {{ errorMessage }}
      </p>
      <p class="text-primary" ng-if="progressMessage">
        <i class="fa fa-fw fa-spinner fa-spin"></i>{{ progressMessage }}
      </p>
    </div>
  </div>
  
  <div class="modal-footer">
    <button class="btn btn-default pull-left" data-dismiss="modal" ng-click="close()">Cancel</button>
    <button class="btn btn-success pull-right" data-dismiss="modal" ng-disabled="namespaceExists || !registerForm.$valid" ng-click="ok(newProject)">Create Account</button>
  </div>
</section>